const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/poisStore-BRasoDBD.js","assets/index-Dqw86Mi-.js","assets/index-CnR4VFAu.css"])))=>i.map(i=>d[i]);
import{d as T,h as V,p as B,o as M,_ as A,m as $,n as k,a as ne,r as _,b as ke,c as ee,w as he,i as E,e as ce,f as qe,g as G,j as f,k as Ge,t as x,l as re,v as Le,q as He,s as We,u as O,x as Je,y as X,z as U,A as g,B as q,C as te,D as _e,F as se,E as ie}from"./index-Dqw86Mi-.js";import{u as Ke,L as Se}from"./poisStore-BRasoDBD.js";const we=(e,t)=>{for(const o of Object.keys(t))e.on(o,t[o])},Te=e=>{for(const t of Object.keys(e)){const o=e[t];o&&I(o.cancel)&&o.cancel()}},Xe=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),I=e=>typeof e=="function",N=(e,t,o)=>{for(const l in o){const a="set"+Xe(l);e[a]?he(()=>o[l],(n,s)=>{e[a](n,s)}):t[a]&&he(()=>o[l],n=>{t[a](n)})}},R=(e,t,o={})=>{const l={...o};for(const a in e){const n=t[a],s=e[a];n&&(n&&n.custom===!0||s!==void 0&&(l[a]=s))}return l},F=e=>{const t={},o={};for(const l in e)if(l.startsWith("on")&&!l.startsWith("onUpdate")&&l!=="onReady"){const a=l.slice(2).toLocaleLowerCase();t[a]=e[l]}else o[l]=e[l];return{listeners:t,attrs:o}},Ye=async e=>{const t=await Promise.all([A(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),A(()=>import("./marker-icon-C2eJqgqv.js"),[]),A(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:t[0].default,iconUrl:t[1].default,shadowUrl:t[2].default})},oe=e=>{const t=_((...l)=>console.warn(`Method ${e} has been invoked without being replaced`)),o=(...l)=>t.value(...l);return o.wrapped=t,B(e,o),o},le=(e,t)=>e.wrapped.value=t,P=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,C=e=>{const t=E(e);if(t===void 0)throw new Error(`Attempt to inject ${e.description} before it was provided.`);return t},z=Symbol("useGlobalLeaflet"),H=Symbol("addLayer"),pe=Symbol("removeLayer"),Re=Symbol("registerControl"),Qe=Symbol("registerLayerControl"),je=Symbol("canSetParentHtml"),xe=Symbol("setParentHtml"),Be=Symbol("setIcon"),Me=Symbol("bindPopup"),et=Symbol("bindTooltip"),Ie=Symbol("unbindPopup"),tt=Symbol("unbindTooltip"),Y={options:{type:Object,default:()=>({}),custom:!0}},Q=e=>({options:e.options,methods:{}}),W={...Y,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},me=(e,t,o)=>{const l=C(H),a=C(pe),{options:n,methods:s}=Q(e),i=R(e,W,n),r=()=>l({leafletObject:t.value}),p=()=>a({leafletObject:t.value}),c={...s,setAttribution(y){p(),t.value.options.attribution=y,e.visible&&r()},setName(){p(),e.visible&&r()},setLayerType(){p(),e.visible&&r()},setVisible(y){t.value&&(y?r():p())},bindPopup(y){if(!t.value||!I(t.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}t.value.bindPopup(y)},bindTooltip(y){if(!t.value||!I(t.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}t.value.bindTooltip(y)},unbindTooltip(){t.value&&(I(t.value.closeTooltip)&&t.value.closeTooltip(),I(t.value.unbindTooltip)&&t.value.unbindTooltip())},unbindPopup(){t.value&&(I(t.value.closePopup)&&t.value.closePopup(),I(t.value.unbindPopup)&&t.value.unbindPopup())},updateVisibleProp(y){o.emit("update:visible",y)}};return B(Me,c.bindPopup),B(et,c.bindTooltip),B(Ie,c.unbindPopup),B(tt,c.unbindTooltip),ce(()=>{c.unbindPopup(),c.unbindTooltip(),p()}),{options:i,methods:c}},Ee=(e,t)=>{if(e&&t.default)return V("div",{style:{display:"none"}},t.default())},Ne={...W,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},ot=(e,t,o)=>{const{options:l,methods:a}=me(e,t,o);return{options:R(e,Ne,l),methods:a}},fe={...Ne,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},lt=(e,t,o)=>{const{options:l,methods:a}=ot(e,t,o),n=R(e,fe,l),s=C(pe),i={...a,setStroke(r){t.value.setStyle({stroke:r})},setColor(r){t.value.setStyle({color:r})},setWeight(r){t.value.setStyle({weight:r})},setOpacity(r){t.value.setStyle({opacity:r})},setLineCap(r){t.value.setStyle({lineCap:r})},setLineJoin(r){t.value.setStyle({lineJoin:r})},setDashArray(r){t.value.setStyle({dashArray:r})},setDashOffset(r){t.value.setStyle({dashOffset:r})},setFill(r){t.value.setStyle({fill:r})},setFillColor(r){t.value.setStyle({fillColor:r})},setFillOpacity(r){t.value.setStyle({fillOpacity:r})},setFillRule(r){t.value.setStyle({fillRule:r})},setClassName(r){t.value.setStyle({className:r})}};return ne(()=>{s({leafletObject:t.value})}),{options:n,methods:i}},nt={...fe,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}};({...nt});const J={...Y,position:{type:String}},at=(e,t)=>{const{options:o,methods:l}=Q(e),a=R(e,J,o),n={...l,setPosition(s){t.value&&t.value.setPosition(s)}};return ce(()=>{t.value&&t.value.remove()}),{options:a,methods:n}},rt=e=>e.default?V("div",{ref:"root"},e.default()):null;T({name:"LControl",props:{...J,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(e,t){const o=_(),l=_(),a=E(z),n=C(Re),{options:s,methods:i}=at(e,o);return M(async()=>{const{Control:r,DomEvent:p}=a?P.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),c=r.extend({onAdd(){return l.value}});o.value=$(new c(s)),N(i,o.value,e),n({leafletObject:o.value}),e.disableClickPropagation&&l.value&&p.disableClickPropagation(l.value),e.disableScrollPropagation&&l.value&&p.disableScrollPropagation(l.value),k(()=>t.emit("ready",o.value))}),{root:l,leafletObject:o}},render(){return rt(this.$slots)}});({...J});({...J});({...J});({...J});const ze={...W};({...ze});({...ze});const ye={...W,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},De=(e,t,o)=>{const{options:l,methods:a}=me(e,t,o),n=R(e,ye,l),s={...a,setTileComponent(){var i;(i=t.value)==null||i.redraw()}};return ce(()=>{t.value.off()}),{options:n,methods:s}},st=(e,t,o,l)=>e.extend({initialize(a){this.tileComponents={},this.on("tileunload",this._unloadTile),o.setOptions(this,a)},createTile(a){const n=this._tileCoordsToKey(a);this.tileComponents[n]=t.create("div");const s=V({setup:l,props:["coords"]},{coords:a});return qe(s,this.tileComponents[n]),this.tileComponents[n]},_unloadTile(a){const n=this._tileCoordsToKey(a.coords);this.tileComponents[n]&&(this.tileComponents[n].innerHTML="",this.tileComponents[n]=void 0)}});T({props:{...ye,childRender:{type:Function,required:!0}},setup(e,t){const o=_(),l=_(null),a=_(!1),n=E(z),s=C(H),{options:i,methods:r}=De(e,o,t);return M(async()=>{const{GridLayer:p,DomUtil:c,Util:y}=n?P.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),b=st(p,c,y,e.childRender);o.value=$(new b(i));const{listeners:u}=F(t.attrs);o.value.on(u),N(r,o.value,e),s({...e,...r,leafletObject:o.value}),a.value=!0,k(()=>t.emit("ready",o.value))}),{root:l,ready:a,leafletObject:o}},render(){return this.ready?V("div",{style:{display:"none"},ref:"root"}):null}});const Ce={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}};T({name:"LIcon",props:{...Ce,...Y},setup(e,t){const o=_(),l=E(z),a=C(je),n=C(xe),s=C(Be);let i,r,p,c,y;const b=(h,v,d)=>{const w=h&&h.innerHTML;if(!v){d&&y&&a()&&n(w);return}const{listeners:Z}=F(t.attrs);y&&r(y,Z);const{options:ae}=Q(e),j=R(e,Ce,ae);w&&(j.html=w),y=j.html?p(j):c(j),i(y,Z),s(y)},u=()=>{k(()=>b(o.value,!0,!1))},S=()=>{k(()=>b(o.value,!1,!0))},D={setIconUrl:u,setIconRetinaUrl:u,setIconSize:u,setIconAnchor:u,setPopupAnchor:u,setTooltipAnchor:u,setShadowUrl:u,setShadowRetinaUrl:u,setShadowAnchor:u,setBgPos:u,setClassName:u,setHtml:u};return M(async()=>{const{DomEvent:h,divIcon:v,icon:d}=l?P.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);i=h.on,r=h.off,p=v,c=d,N(D,{},e),new MutationObserver(S).observe(o.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),u()}),{root:o}},render(){const e=this.$slots.default?this.$slots.default():void 0;return V("div",{ref:"root"},e)}});({...W});function Ue(e,t,o){var l,a,n;t===void 0&&(t=50),o===void 0&&(o={});var s=(l=o.isImmediate)!=null&&l,i=(a=o.callback)!=null&&a,r=o.maxWait,p=Date.now(),c=[];function y(){if(r!==void 0){var u=Date.now()-p;if(u+t>=r)return r-u}return t}var b=function(){var u=[].slice.call(arguments),S=this;return new Promise(function(D,h){var v=s&&n===void 0;if(n!==void 0&&clearTimeout(n),n=setTimeout(function(){if(n=void 0,p=Date.now(),!s){var w=e.apply(S,u);i&&i(w),c.forEach(function(Z){return(0,Z.resolve)(w)}),c=[]}},y()),v){var d=e.apply(S,u);return i&&i(d),D(d)}c.push({resolve:D,reject:h})})};return b.cancel=function(u){n!==void 0&&clearTimeout(n),c.forEach(function(S){return(0,S.reject)(u)}),c=[]},b}const Oe={...Y,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},it=T({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:Oe,setup(e,t){const o=_(),l=ke({ready:!1,layersToAdd:[],layersInControl:[]}),{options:a}=Q(e),n=R(e,Oe,a),{listeners:s,attrs:i}=F(t.attrs),r=oe(H),p=oe(pe),c=oe(Re),y=oe(Qe);B(z,e.useGlobalLeaflet);const b=ee(()=>{const v={};return e.noBlockingAnimations&&(v.animate=!1),v}),u=ee(()=>{const v=b.value;return e.padding&&(v.padding=e.padding),e.paddingTopLeft&&(v.paddingTopLeft=e.paddingTopLeft),e.paddingBottomRight&&(v.paddingBottomRight=e.paddingBottomRight),v}),S={moveend:Ue(v=>{l.leafletRef&&(t.emit("update:zoom",l.leafletRef.getZoom()),t.emit("update:center",l.leafletRef.getCenter()),t.emit("update:bounds",l.leafletRef.getBounds()))}),overlayadd(v){const d=l.layersInControl.find(w=>w.name===v.name);d&&d.updateVisibleProp(!0)},overlayremove(v){const d=l.layersInControl.find(w=>w.name===v.name);d&&d.updateVisibleProp(!1)}};M(async()=>{e.useGlobalLeaflet&&(P.L=P.L||await A(()=>import("./poisStore-BRasoDBD.js").then(m=>m.l),__vite__mapDeps([0,1,2])));const{map:v,CRS:d,Icon:w,latLngBounds:Z,latLng:ae,stamp:j}=e.useGlobalLeaflet?P.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);try{n.beforeMapMount&&await n.beforeMapMount()}catch(m){console.error(`The following error occurred running the provided beforeMapMount hook ${m.message}`)}await Ye(w);const Ze=typeof n.crs=="string"?d[n.crs]:n.crs;n.crs=Ze||d.EPSG3857;const K={addLayer(m){m.layerType!==void 0&&(l.layerControl===void 0?l.layersToAdd.push(m):l.layersInControl.find(L=>j(L.leafletObject)===j(m.leafletObject))||(l.layerControl.addLayer(m),l.layersInControl.push(m))),m.visible!==!1&&l.leafletRef.addLayer(m.leafletObject)},removeLayer(m){m.layerType!==void 0&&(l.layerControl===void 0?l.layersToAdd=l.layersToAdd.filter(L=>L.name!==m.name):(l.layerControl.removeLayer(m.leafletObject),l.layersInControl=l.layersInControl.filter(L=>j(L.leafletObject)!==j(m.leafletObject)))),l.leafletRef.removeLayer(m.leafletObject)},registerLayerControl(m){l.layerControl=m,l.layersToAdd.forEach(L=>{l.layerControl.addLayer(L)}),l.layersToAdd=[],c(m)},registerControl(m){l.leafletRef.addControl(m.leafletObject)},setZoom(m){const L=l.leafletRef.getZoom();m!==L&&l.leafletRef.setZoom(m,b.value)},setCrs(m){const L=l.leafletRef.getBounds();l.leafletRef.options.crs=m,l.leafletRef.fitBounds(L,{animate:!1,padding:[0,0]})},fitBounds(m){l.leafletRef.fitBounds(m,u.value)},setBounds(m){if(!m)return;const L=Z(m);L.isValid()&&!(l.lastSetBounds||l.leafletRef.getBounds()).equals(L,0)&&(l.lastSetBounds=L,l.leafletRef.fitBounds(L))},setCenter(m){if(m==null)return;const L=ae(m),ge=l.lastSetCenter||l.leafletRef.getCenter();(ge.lat!==L.lat||ge.lng!==L.lng)&&(l.lastSetCenter=L,l.leafletRef.panTo(L,b.value))}};le(r,K.addLayer),le(p,K.removeLayer),le(c,K.registerControl),le(y,K.registerLayerControl),l.leafletRef=$(v(o.value,n)),N(K,l.leafletRef,e),we(l.leafletRef,S),we(l.leafletRef,s),l.ready=!0,k(()=>t.emit("ready",l.leafletRef))}),ne(()=>{Te(S),l.leafletRef&&(l.leafletRef.off(),l.leafletRef.remove())});const D=ee(()=>l.leafletRef),h=ee(()=>l.ready);return{root:o,ready:h,leafletObject:D,attrs:i}},render({attrs:e}){return e.style||(e.style={}),e.style.width||(e.style.width="100%"),e.style.height||(e.style.height="100%"),V("div",{...e,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),ut=["Symbol(Comment)","Symbol(Text)"],dt=["LTooltip","LPopup"],Ve={...W,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},ct=(e,t,o)=>{const{options:l,methods:a}=me(e,t,o),n=R(e,Ve,l),s={...a,setDraggable(i){t.value.dragging&&(i?t.value.dragging.enable():t.value.dragging.disable())},latLngSync(i){o.emit("update:latLng",i.latlng),o.emit("update:lat-lng",i.latlng)},setLatLng(i){if(i!=null&&t.value){const r=t.value.getLatLng();(!r||!r.equals(i))&&t.value.setLatLng(i)}}};return{options:n,methods:s}},pt=(e,t)=>{const o=t.slots.default&&t.slots.default();return o&&o.length&&o.some(mt)};function mt(e){return!(ut.includes(e.type.toString())||dt.includes(e.type.name))}const ue=T({name:"LMarker",props:Ve,setup(e,t){const o=_(),l=_(!1),a=E(z),n=C(H);B(je,()=>{var p;return!!((p=o.value)!=null&&p.getElement())}),B(xe,p=>{var c,y;const b=I((c=o.value)==null?void 0:c.getElement)&&((y=o.value)==null?void 0:y.getElement());b&&(b.innerHTML=p)}),B(Be,p=>{var c;return((c=o.value)==null?void 0:c.setIcon)&&o.value.setIcon(p)});const{options:s,methods:i}=ct(e,o,t),r={moveHandler:Ue(i.latLngSync)};return M(async()=>{const{marker:p,divIcon:c}=a?P.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);pt(s,t)&&(s.icon=c({className:""})),o.value=$(p(e.latLng,s));const{listeners:y}=F(t.attrs);o.value.on(y),o.value.on("move",r.moveHandler),N(i,o.value,e),n({...e,...i,leafletObject:o.value}),l.value=!0,k(()=>t.emit("ready",o.value))}),ne(()=>Te(r)),{ready:l,leafletObject:o}},render(){return Ee(this.ready,this.$slots)}}),ve={...fe,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},ft=(e,t,o)=>{const{options:l,methods:a}=lt(e,t,o),n=R(e,ve,l),s={...a,setSmoothFactor(i){t.value.setStyle({smoothFactor:i})},setNoClip(i){t.value.setStyle({noClip:i})},addLatLng(i){t.value.addLatLng(i)}};return{options:n,methods:s}},Ae={...ve},Pe=T({name:"LPolyline",props:ve,setup(e,t){const o=_(),l=_(!1),a=E(z),n=C(H),{options:s,methods:i}=ft(e,o,t);return M(async()=>{const{polyline:r}=a?P.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=$(r(e.latLngs,s));const{listeners:p}=F(t.attrs);o.value.on(p),N(i,o.value,e),n({...e,...i,leafletObject:o.value}),l.value=!0,k(()=>t.emit("ready",o.value))}),{ready:l,leafletObject:o}},render(){return Ee(this.ready,this.$slots)}}),$e={...Y,content:{type:String,default:null}},yt=(e,t)=>{const{options:o,methods:l}=Q(e),a={...l,setContent(n){t.value&&n!==null&&n!==void 0&&t.value.setContent(n)}};return{options:o,methods:a}},vt=e=>e.default?V("div",{ref:"root"},e.default()):null,bt={...$e,latLng:{type:[Object,Array],default:()=>[]}},gt=(e,t)=>{const{options:o,methods:l}=yt(e,t);return{options:o,methods:l}},de=T({name:"LPopup",props:bt,setup(e,t){const o=_(),l=_(null),a=E(z),n=C(Me),s=C(Ie),{options:i,methods:r}=gt(e,o);return M(async()=>{const{popup:p}=a?P.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=$(p(i)),e.latLng!==void 0&&o.value.setLatLng(e.latLng),N(r,o.value,e);const{listeners:c}=F(t.attrs);o.value.on(c),o.value.setContent(e.content||l.value||""),n(o.value),k(()=>t.emit("ready",o.value))}),ne(()=>{s()}),{root:l,leafletObject:o}},render(){return vt(this.$slots)}});({...Ae,latLngs:{...Ae.latLngs}});const be={...ye,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:e=>typeof e=="string"?!0:Array.isArray(e)?e.every(t=>typeof t=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},ht=(e,t,o)=>{const{options:l,methods:a}=De(e,t,o),n=R(e,be,l),s={...a};return{options:n,methods:s}},Lt=T({props:be,setup(e,t){const o=_(),l=E(z),a=C(H),{options:n,methods:s}=ht(e,o,t);return M(async()=>{const{tileLayer:i}=l?P.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=$(i(e.url,n));const{listeners:r}=F(t.attrs);o.value.on(r),N(s,o.value,e),a({...e,...s,leafletObject:o.value}),k(()=>t.emit("ready",o.value))}),{leafletObject:o}},render(){return null}});({...$e});({...be});const _t={class:"modal-box"},St={class:"alert alert-info mb-4"},wt={class:"font-mono text-sm"},Ct={class:"form-control mb-4"},Ot={class:"form-control mb-4"},At={class:"form-control mb-4"},Pt=T({__name:"MarkerFormModal",props:{position:{}},emits:["save","cancel"],setup(e,{expose:t,emit:o}){const l=o,a=_(null),n=ke({label:"",description:"",category:"personal"}),s=b=>`${b[0].toFixed(6)}°, ${b[1].toFixed(6)}°`,i=()=>{var b;(b=a.value)==null||b.showModal()},r=()=>{var b;(b=a.value)==null||b.close()},p=()=>{l("save",{label:n.label||void 0,description:n.description||void 0,category:n.category}),y(),r()},c=()=>{l("cancel"),y(),r()},y=()=>{n.label="",n.description="",n.category="personal"};return t({showModal:i,hideModal:r}),(b,u)=>(O(),G("dialog",{ref_key:"modalRef",ref:a,class:"modal"},[f("div",_t,[u[10]||(u[10]=f("h3",{class:"font-bold text-lg mb-4"},"Neuen Marker erstellen",-1)),f("form",{onSubmit:Ge(p,["prevent"])},[f("div",St,[u[4]||(u[4]=f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-current shrink-0 w-6 h-6"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),f("div",null,[u[3]||(u[3]=f("div",{class:"text-xs"},"Koordinaten",-1)),f("div",wt,x(s(e.position)),1)])]),f("div",Ct,[u[5]||(u[5]=f("label",{class:"label"},[f("span",{class:"label-text"},"Name (optional)")],-1)),re(f("input",{"onUpdate:modelValue":u[0]||(u[0]=S=>n.label=S),type:"text",placeholder:"z.B. Parkplatz, Aussichtspunkt...",class:"input input-bordered w-full",autofocus:""},null,512),[[Le,n.label]])]),f("div",Ot,[u[6]||(u[6]=f("label",{class:"label"},[f("span",{class:"label-text"},"Beschreibung (optional)")],-1)),re(f("textarea",{"onUpdate:modelValue":u[1]||(u[1]=S=>n.description=S),placeholder:"Notizen zu diesem Ort...",class:"textarea textarea-bordered h-20"},null,512),[[Le,n.description]])]),f("div",At,[u[8]||(u[8]=f("label",{class:"label"},[f("span",{class:"label-text"},"Kategorie")],-1)),re(f("select",{"onUpdate:modelValue":u[2]||(u[2]=S=>n.category=S),class:"select select-bordered w-full"},[...u[7]||(u[7]=[We('<option value="personal" data-v-3b3f907d>Persönlich</option><option value="waypoint" data-v-3b3f907d>Wegpunkt</option><option value="parking" data-v-3b3f907d>Parkplatz</option><option value="campsite" data-v-3b3f907d>Campingplatz</option><option value="photo-spot" data-v-3b3f907d>Foto-Spot</option><option value="danger" data-v-3b3f907d>Achtung/Gefahr</option><option value="other" data-v-3b3f907d>Sonstiges</option>',7)])],512),[[He,n.category]])]),f("div",{class:"modal-action"},[f("button",{type:"button",onClick:c,class:"btn"}," Abbrechen "),u[9]||(u[9]=f("button",{type:"submit",class:"btn btn-primary"}," Marker speichern ",-1))])],32)]),f("form",{method:"dialog",class:"modal-backdrop"},[f("button",{type:"button",onClick:c},"close")])],512))}}),Fe=(e,t)=>{const o=e.__vccOpts||e;for(const[l,a]of t)o[l]=a;return o},kt=Fe(Pt,[["__scopeId","data-v-3b3f907d"]]),Tt={class:"w-full h-full"},Rt={class:"flex flex-col gap-2 min-w-[200px]"},jt={class:"font-bold text-base"},xt={key:0,class:"text-sm opacity-80"},Bt={class:"badge badge-sm"},Mt={class:"text-xs opacity-60 font-mono"},It={class:"text-xs opacity-50"},Et=["onClick"],Nt=T({__name:"MapView",setup(e,{expose:t}){const o=Je(),l=Ke(),a=_(null),n=_(null),s=_(null),i=new Se.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),r=new Se.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),p=h=>{var d;const v=[h.latlng.lat,h.latlng.lng];o.isRecording?o.addPointToPath(v):(s.value=v,(d=n.value)==null||d.showModal())},c=h=>{s.value&&(o.addUserMarker(s.value,h.label,h.description,h.category),s.value=null)},y=()=>{s.value=null},b=h=>new Date(h).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return t({centerOnUser:async()=>{try{await o.centerOnUser()}catch(h){alert(h.message||"Failed to get your location")}},toggleRecording:()=>{o.toggleRecording()},clearPath:()=>{o.clearPath()}}),M(()=>{k(()=>{var h;(h=a.value)!=null&&h.leafletObject&&a.value.leafletObject.invalidateSize()})}),(h,v)=>(O(),G("div",Tt,[X(g(it),{ref_key:"mapComponent",ref:a,zoom:g(o).zoom,center:g(o).center,"onUpdate:zoom":v[0]||(v[0]=d=>g(o).setZoom(d)),"onUpdate:center":v[1]||(v[1]=d=>g(o).setCenter(d)),onClick:p,options:{touchZoom:!0,doubleClickZoom:!0,scrollWheelZoom:!0,tap:!0,tapTolerance:15,dragging:!0,zoomControl:!0,attributionControl:!0},class:"w-full h-full"},{default:U(()=>[X(g(Lt),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),g(o).userLocation?(O(),q(g(ue),{key:0,"lat-lng":g(o).userLocation,icon:g(i)},{default:U(()=>[X(g(de),null,{default:U(()=>[...v[2]||(v[2]=[_e("Your Location",-1)])]),_:1})]),_:1},8,["lat-lng","icon"])):te("",!0),(O(!0),G(se,null,ie(g(l).pois,d=>(O(),q(g(ue),{key:d.id,"lat-lng":d.coordinates,icon:g(l).getMarkerIcon(d.category)},{default:U(()=>[X(g(de),null,{default:U(()=>[f("b",null,x(d.name),1),v[3]||(v[3]=f("br",null,null,-1)),_e(x(d.description),1)]),_:2},1024)]),_:2},1032,["lat-lng","icon"]))),128)),(O(!0),G(se,null,ie(g(o).userMarkers,d=>(O(),q(g(ue),{key:d.id,"lat-lng":d.position,icon:g(r)},{default:U(()=>[X(g(de),null,{default:U(()=>[f("div",Rt,[f("div",jt,x(d.label||"Unbenannter Marker"),1),d.description?(O(),G("div",xt,x(d.description),1)):te("",!0),f("div",Bt,x(d.category),1),f("div",Mt,x(d.position[0].toFixed(6))+"°, "+x(d.position[1].toFixed(6))+"° ",1),f("div",It,x(b(d.timestamp)),1),f("button",{onClick:w=>g(o).removeUserMarker(d.id),class:"btn btn-xs btn-error mt-2"}," Löschen ",8,Et)])]),_:2},1024)]),_:2},1032,["lat-lng","icon"]))),128)),g(o).currentPath.length>0?(O(),q(g(Pe),{key:1,"lat-lngs":g(o).currentPath,color:"red",weight:4,opacity:.7},null,8,["lat-lngs"])):te("",!0),(O(!0),G(se,null,ie(g(o).savedPaths,d=>(O(),q(g(Pe),{key:d.id,"lat-lngs":d.points,color:"blue",weight:3,opacity:.5},null,8,["lat-lngs"]))),128))]),_:1},8,["zoom","center"]),s.value?(O(),q(kt,{key:0,ref_key:"markerFormModal",ref:n,position:s.value,onSave:c,onCancel:y},null,8,["position"])):te("",!0)]))}}),Ut=Fe(Nt,[["__scopeId","data-v-7fc99c39"]]);export{Ut as default};
