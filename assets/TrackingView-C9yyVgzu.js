import{d as C,u as U,o as b,c as f,a as t,n as G,b as o,e as r,s as d,t as a,f as h,w as k,v as w,g as P,r as m,h as D}from"./index-BHRAPVQn.js";import{M as E,_ as I}from"./MapView-BMrfKuMy.js";import"./poisStore-Dzijlewg.js";const j={class:"ml-2"},F={key:0,class:"stats stats-vertical lg:stats-horizontal shadow mt-4"},R={class:"stat"},q={class:"stat-figure text-primary"},A={class:"stat-value text-primary text-2xl"},H={class:"stat"},K={class:"stat-figure text-secondary"},J={class:"stat-value text-secondary text-2xl"},L={class:"stat"},O={class:"stat-figure text-accent"},Q={class:"stat-value text-accent text-2xl"},X={class:"modal-box"},Y={class:"form-control mb-4"},Z={class:"form-control mb-4"},tt={class:"label"},st={class:"label-text-alt"},et={class:"form-control mb-4"},nt={class:"label"},at={class:"label-text-alt"},lt={class:"alert alert-info mb-4"},ot={class:"modal-action"},it={class:"modal-box"},rt={key:0,class:"stats stats-vertical shadow mb-4"},dt={class:"stat"},ut={class:"stat-value text-sm"},ct={class:"stat"},vt={class:"stat-value text-sm"},mt={class:"stat"},pt={class:"stat-value text-sm"},gt={class:"modal-action"},bt=C({__name:"TrackingControl",setup(z){const i=U(),p=m(null),x=m(null),g=m("Unbenannte Wanderung"),u=m(1),c=m(10),v=D(()=>i.isRecording),l=D(()=>i.liveStats),y=e=>e<1e3?`${e.toFixed(0)} m`:`${(e/1e3).toFixed(2)} km`,S=e=>{const s=Math.floor(e/1e3),n=Math.floor(s/60),$=Math.floor(n/60);if($>0){const _=n%60;return`${$}:${_.toString().padStart(2,"0")} h`}if(n>0){const _=s%60;return`${n}:${_.toString().padStart(2,"0")} min`}return`${s} s`},V=()=>{var e;(e=p.value)==null||e.showModal()},M=()=>{var e;(e=p.value)==null||e.close()},T=()=>{var e;(e=x.value)==null||e.close()},W=async()=>{M(),i.updateTrackingConfig({minTimeInterval:u.value*60*1e3,minDistance:c.value});try{await i.startTracking(g.value),console.log("✅ Tracking gestartet")}catch(e){console.error("❌ Tracking-Start fehlgeschlagen:",e.message),alert("GPS konnte nicht gestartet werden. Bitte aktiviere GPS in deinen Einstellungen.")}},B=()=>{var e;(e=x.value)==null||e.showModal()},N=async()=>{T(),await i.stopTracking(),console.log("✅ Tracking gestoppt"),g.value="Unbenannte Wanderung",u.value=1,c.value=10};return(e,s)=>(b(),f("div",null,[t("button",{onClick:s[0]||(s[0]=n=>v.value?B():V()),class:G(["btn btn-lg",v.value?"btn-error":"btn-success"])},[o(r(d),{icon:v.value?"square":"play",size:"20"},null,8,["icon"]),t("span",j,a(v.value?"Stoppen":"Wanderung starten"),1)],2),v.value&&l.value?(b(),f("div",F,[t("div",R,[t("div",q,[o(r(d),{icon:"navigation",size:"24"})]),s[8]||(s[8]=t("div",{class:"stat-title"},"Distanz",-1)),t("div",A,a(y(l.value.totalDistance)),1)]),t("div",H,[t("div",K,[o(r(d),{icon:"clock",size:"24"})]),s[9]||(s[9]=t("div",{class:"stat-title"},"Dauer",-1)),t("div",J,a(S(l.value.duration)),1)]),t("div",L,[t("div",O,[o(r(d),{icon:"map-pin",size:"24"})]),s[10]||(s[10]=t("div",{class:"stat-title"},"Wegpunkte",-1)),t("div",Q,a(l.value.waypointCount),1)])])):h("",!0),t("dialog",{ref_key:"settingsModal",ref:p,class:"modal"},[t("div",X,[s[18]||(s[18]=t("h3",{class:"font-bold text-lg mb-4"},"Tracking-Einstellungen",-1)),t("div",Y,[s[11]||(s[11]=t("label",{class:"label"},[t("span",{class:"label-text"},"Name der Wanderung")],-1)),k(t("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>g.value=n),type:"text",placeholder:"z.B. Keltenwelt-Rundweg",class:"input input-bordered"},null,512),[[w,g.value]])]),t("div",Z,[t("label",tt,[s[12]||(s[12]=t("span",{class:"label-text"},"Wegpunkt-Intervall",-1)),t("span",st,a(u.value)+" Minute(n)",1)]),k(t("input",{"onUpdate:modelValue":s[2]||(s[2]=n=>u.value=n),type:"range",min:"1",max:"5",class:"range range-primary",step:"1"},null,512),[[w,u.value,void 0,{number:!0}]]),s[13]||(s[13]=t("div",{class:"w-full flex justify-between text-xs px-2 mt-1"},[t("span",null,"1 min"),t("span",null,"2 min"),t("span",null,"3 min"),t("span",null,"4 min"),t("span",null,"5 min")],-1))]),t("div",et,[t("label",nt,[s[14]||(s[14]=t("span",{class:"label-text"},"Mindestbewegung",-1)),t("span",at,a(c.value)+" Meter",1)]),k(t("input",{"onUpdate:modelValue":s[3]||(s[3]=n=>c.value=n),type:"range",min:"5",max:"50",class:"range range-secondary",step:"5"},null,512),[[w,c.value,void 0,{number:!0}]]),s[15]||(s[15]=t("div",{class:"w-full flex justify-between text-xs px-2 mt-1"},[t("span",null,"5m"),t("span",null,"25m"),t("span",null,"50m")],-1))]),t("div",lt,[o(r(d),{icon:"info",size:"20"}),s[16]||(s[16]=t("div",{class:"text-sm"},[t("p",{class:"font-semibold"},"GPS-Tracking Hinweise:"),t("ul",{class:"list-disc list-inside mt-1"},[t("li",null,"Bildschirm bleibt während Tracking an"),t("li",null,"GPS funktioniert offline"),t("li",null,"Batterieverbrauch: ~10-15%/Stunde")])],-1))]),t("div",ot,[t("button",{onClick:s[4]||(s[4]=n=>M()),class:"btn btn-ghost"}," Abbrechen "),t("button",{onClick:s[5]||(s[5]=n=>W()),class:"btn btn-success"},[o(r(d),{icon:"play",size:"20"}),s[17]||(s[17]=P(" Tracking starten ",-1))])])]),s[19]||(s[19]=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1))],512),t("dialog",{ref_key:"stopModal",ref:x,class:"modal"},[t("div",it,[s[23]||(s[23]=t("h3",{class:"font-bold text-lg"},"Tracking beenden?",-1)),s[24]||(s[24]=t("p",{class:"py-4"}," Deine Wanderung wird gespeichert. ",-1)),l.value?(b(),f("div",rt,[t("div",dt,[s[20]||(s[20]=t("div",{class:"stat-title"},"Distanz",-1)),t("div",ut,a(y(l.value.totalDistance)),1)]),t("div",ct,[s[21]||(s[21]=t("div",{class:"stat-title"},"Dauer",-1)),t("div",vt,a(S(l.value.duration)),1)]),t("div",mt,[s[22]||(s[22]=t("div",{class:"stat-title"},"Wegpunkte",-1)),t("div",pt,a(l.value.waypointCount),1)])])):h("",!0),t("div",gt,[t("button",{onClick:s[6]||(s[6]=n=>T()),class:"btn btn-ghost"}," Weitermachen "),t("button",{onClick:s[7]||(s[7]=n=>N()),class:"btn btn-error"}," Tracking stoppen ")])]),s[25]||(s[25]=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1))],512)]))}}),ft={class:"flex flex-col h-full"},xt={class:"flex-1 relative"},_t={class:"bg-base-200 p-4 border-t border-base-300"},kt={class:"container mx-auto max-w-4xl"},wt=C({__name:"TrackingView",setup(z){return(i,p)=>(b(),f("div",ft,[t("div",xt,[o(E)]),t("div",_t,[t("div",kt,[o(bt)])])]))}}),Tt=I(wt,[["__scopeId","data-v-2e2b571c"]]);export{Tt as default};
