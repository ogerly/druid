const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/poisStore-DRPdUIpb.js","assets/index-DhICvMMZ.js","assets/index-BkD_V4sz.css"])))=>i.map(i=>d[i]);
import{d as P,h as q,p as D,o as I,_ as O,m as H,n as R,a as it,r as _,b as Pt,c as X,w as kt,i as U,e as ft,f as qt,g as A,j as n,k as Ht,t as L,l as Y,v as lt,q as Kt,s as Jt,u as x,x as At,y as T,z as y,A as J,B as Xt,C as E,D as vt,E as G,F as Z,G as ut,H as dt}from"./index-DhICvMMZ.js";import{u as Yt,L as Lt}from"./poisStore-DRPdUIpb.js";import{_ as Mt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const xt=(t,e)=>{for(const o of Object.keys(e))t.on(o,e[o])},Rt=t=>{for(const e of Object.keys(t)){const o=t[e];o&&N(o.cancel)&&o.cancel()}},Qt=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),N=t=>typeof t=="function",V=(t,e,o)=>{for(const l in o){const i="set"+Qt(l);t[i]?kt(()=>o[l],(s,u)=>{t[i](s,u)}):e[i]&&kt(()=>o[l],s=>{e[i](s)})}},j=(t,e,o={})=>{const l={...o};for(const i in t){const s=e[i],u=t[i];s&&(s&&s.custom===!0||u!==void 0&&(l[i]=u))}return l},K=t=>{const e={},o={};for(const l in t)if(l.startsWith("on")&&!l.startsWith("onUpdate")&&l!=="onReady"){const i=l.slice(2).toLocaleLowerCase();e[i]=t[l]}else o[l]=t[l];return{listeners:e,attrs:o}},te=async t=>{const e=await Promise.all([O(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),O(()=>import("./marker-icon-C2eJqgqv.js"),[]),O(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:e[0].default,iconUrl:e[1].default,shadowUrl:e[2].default})},st=t=>{const e=_((...l)=>console.warn(`Method ${t} has been invoked without being replaced`)),o=(...l)=>e.value(...l);return o.wrapped=e,D(t,o),o},rt=(t,e)=>t.wrapped.value=e,M=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,C=t=>{const e=U(t);if(e===void 0)throw new Error(`Attempt to inject ${t.description} before it was provided.`);return e},F=Symbol("useGlobalLeaflet"),Q=Symbol("addLayer"),yt=Symbol("removeLayer"),jt=Symbol("registerControl"),ee=Symbol("registerLayerControl"),Bt=Symbol("canSetParentHtml"),zt=Symbol("setParentHtml"),$t=Symbol("setIcon"),Dt=Symbol("bindPopup"),oe=Symbol("bindTooltip"),It=Symbol("unbindPopup"),le=Symbol("unbindTooltip"),nt={options:{type:Object,default:()=>({}),custom:!0}},at=t=>({options:t.options,methods:{}}),tt={...nt,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},bt=(t,e,o)=>{const l=C(Q),i=C(yt),{options:s,methods:u}=at(t),d=j(t,tt,s),r=()=>l({leafletObject:e.value}),v=()=>i({leafletObject:e.value}),m={...u,setAttribution(b){v(),e.value.options.attribution=b,t.visible&&r()},setName(){v(),t.visible&&r()},setLayerType(){v(),t.visible&&r()},setVisible(b){e.value&&(b?r():v())},bindPopup(b){if(!e.value||!N(e.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}e.value.bindPopup(b)},bindTooltip(b){if(!e.value||!N(e.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}e.value.bindTooltip(b)},unbindTooltip(){e.value&&(N(e.value.closeTooltip)&&e.value.closeTooltip(),N(e.value.unbindTooltip)&&e.value.unbindTooltip())},unbindPopup(){e.value&&(N(e.value.closePopup)&&e.value.closePopup(),N(e.value.unbindPopup)&&e.value.unbindPopup())},updateVisibleProp(b){o.emit("update:visible",b)}};return D(Dt,m.bindPopup),D(oe,m.bindTooltip),D(It,m.unbindPopup),D(le,m.unbindTooltip),ft(()=>{m.unbindPopup(),m.unbindTooltip(),v()}),{options:d,methods:m}},Et=(t,e)=>{if(t&&e.default)return q("div",{style:{display:"none"}},e.default())},Nt={...tt,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},ne=(t,e,o)=>{const{options:l,methods:i}=bt(t,e,o);return{options:j(t,Nt,l),methods:i}},gt={...Nt,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},ae=(t,e,o)=>{const{options:l,methods:i}=ne(t,e,o),s=j(t,gt,l),u=C(yt),d={...i,setStroke(r){e.value.setStyle({stroke:r})},setColor(r){e.value.setStyle({color:r})},setWeight(r){e.value.setStyle({weight:r})},setOpacity(r){e.value.setStyle({opacity:r})},setLineCap(r){e.value.setStyle({lineCap:r})},setLineJoin(r){e.value.setStyle({lineJoin:r})},setDashArray(r){e.value.setStyle({dashArray:r})},setDashOffset(r){e.value.setStyle({dashOffset:r})},setFill(r){e.value.setStyle({fill:r})},setFillColor(r){e.value.setStyle({fillColor:r})},setFillOpacity(r){e.value.setStyle({fillOpacity:r})},setFillRule(r){e.value.setStyle({fillRule:r})},setClassName(r){e.value.setStyle({className:r})}};return it(()=>{u({leafletObject:e.value})}),{options:s,methods:d}},se={...gt,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}};({...se});const et={...nt,position:{type:String}},re=(t,e)=>{const{options:o,methods:l}=at(t),i=j(t,et,o),s={...l,setPosition(u){e.value&&e.value.setPosition(u)}};return ft(()=>{e.value&&e.value.remove()}),{options:i,methods:s}},ie=t=>t.default?q("div",{ref:"root"},t.default()):null;P({name:"LControl",props:{...et,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(t,e){const o=_(),l=_(),i=U(F),s=C(jt),{options:u,methods:d}=re(t,o);return I(async()=>{const{Control:r,DomEvent:v}=i?M.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),m=r.extend({onAdd(){return l.value}});o.value=H(new m(u)),V(d,o.value,t),s({leafletObject:o.value}),t.disableClickPropagation&&l.value&&v.disableClickPropagation(l.value),t.disableScrollPropagation&&l.value&&v.disableScrollPropagation(l.value),R(()=>e.emit("ready",o.value))}),{root:l,leafletObject:o}},render(){return ie(this.$slots)}});({...et});({...et});({...et});({...et});const Ut={...tt};({...Ut});({...Ut});const ht={...tt,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},Vt=(t,e,o)=>{const{options:l,methods:i}=bt(t,e,o),s=j(t,ht,l),u={...i,setTileComponent(){var d;(d=e.value)==null||d.redraw()}};return ft(()=>{e.value.off()}),{options:s,methods:u}},ue=(t,e,o,l)=>t.extend({initialize(i){this.tileComponents={},this.on("tileunload",this._unloadTile),o.setOptions(this,i)},createTile(i){const s=this._tileCoordsToKey(i);this.tileComponents[s]=e.create("div");const u=q({setup:l,props:["coords"]},{coords:i});return qt(u,this.tileComponents[s]),this.tileComponents[s]},_unloadTile(i){const s=this._tileCoordsToKey(i.coords);this.tileComponents[s]&&(this.tileComponents[s].innerHTML="",this.tileComponents[s]=void 0)}});P({props:{...ht,childRender:{type:Function,required:!0}},setup(t,e){const o=_(),l=_(null),i=_(!1),s=U(F),u=C(Q),{options:d,methods:r}=Vt(t,o,e);return I(async()=>{const{GridLayer:v,DomUtil:m,Util:b}=s?M.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),g=ue(v,m,b,t.childRender);o.value=H(new g(d));const{listeners:p}=K(e.attrs);o.value.on(p),V(r,o.value,t),u({...t,...r,leafletObject:o.value}),i.value=!0,R(()=>e.emit("ready",o.value))}),{root:l,ready:i,leafletObject:o}},render(){return this.ready?q("div",{style:{display:"none"},ref:"root"}):null}});const Ct={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}};P({name:"LIcon",props:{...Ct,...nt},setup(t,e){const o=_(),l=U(F),i=C(Bt),s=C(zt),u=C($t);let d,r,v,m,b;const g=(S,c,a)=>{const h=S&&S.innerHTML;if(!c){a&&b&&i()&&s(h);return}const{listeners:z}=K(e.attrs);b&&r(b,z);const{options:W}=at(t),$=j(t,Ct,W);h&&($.html=h),b=$.html?v($):m($),d(b,z),u(b)},p=()=>{R(()=>g(o.value,!0,!1))},k=()=>{R(()=>g(o.value,!1,!0))},B={setIconUrl:p,setIconRetinaUrl:p,setIconSize:p,setIconAnchor:p,setPopupAnchor:p,setTooltipAnchor:p,setShadowUrl:p,setShadowRetinaUrl:p,setShadowAnchor:p,setBgPos:p,setClassName:p,setHtml:p};return I(async()=>{const{DomEvent:S,divIcon:c,icon:a}=l?M.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);d=S.on,r=S.off,v=c,m=a,V(B,{},t),new MutationObserver(k).observe(o.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),p()}),{root:o}},render(){const t=this.$slots.default?this.$slots.default():void 0;return q("div",{ref:"root"},t)}});({...tt});function Ft(t,e,o){var l,i,s;e===void 0&&(e=50),o===void 0&&(o={});var u=(l=o.isImmediate)!=null&&l,d=(i=o.callback)!=null&&i,r=o.maxWait,v=Date.now(),m=[];function b(){if(r!==void 0){var p=Date.now()-v;if(p+e>=r)return r-p}return e}var g=function(){var p=[].slice.call(arguments),k=this;return new Promise(function(B,S){var c=u&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,v=Date.now(),!u){var h=t.apply(k,p);d&&d(h),m.forEach(function(z){return(0,z.resolve)(h)}),m=[]}},b()),c){var a=t.apply(k,p);return d&&d(a),B(a)}m.push({resolve:B,reject:S})})};return g.cancel=function(p){s!==void 0&&clearTimeout(s),m.forEach(function(k){return(0,k.reject)(p)}),m=[]},g}const Tt={...nt,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},de=P({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:Tt,setup(t,e){const o=_(),l=Pt({ready:!1,layersToAdd:[],layersInControl:[]}),{options:i}=at(t),s=j(t,Tt,i),{listeners:u,attrs:d}=K(e.attrs),r=st(Q),v=st(yt),m=st(jt),b=st(ee);D(F,t.useGlobalLeaflet);const g=X(()=>{const c={};return t.noBlockingAnimations&&(c.animate=!1),c}),p=X(()=>{const c=g.value;return t.padding&&(c.padding=t.padding),t.paddingTopLeft&&(c.paddingTopLeft=t.paddingTopLeft),t.paddingBottomRight&&(c.paddingBottomRight=t.paddingBottomRight),c}),k={moveend:Ft(c=>{l.leafletRef&&(e.emit("update:zoom",l.leafletRef.getZoom()),e.emit("update:center",l.leafletRef.getCenter()),e.emit("update:bounds",l.leafletRef.getBounds()))}),overlayadd(c){const a=l.layersInControl.find(h=>h.name===c.name);a&&a.updateVisibleProp(!0)},overlayremove(c){const a=l.layersInControl.find(h=>h.name===c.name);a&&a.updateVisibleProp(!1)}};I(async()=>{t.useGlobalLeaflet&&(M.L=M.L||await O(()=>import("./poisStore-DRPdUIpb.js").then(f=>f.l),__vite__mapDeps([0,1,2])));const{map:c,CRS:a,Icon:h,latLngBounds:z,latLng:W,stamp:$}=t.useGlobalLeaflet?M.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);try{s.beforeMapMount&&await s.beforeMapMount()}catch(f){console.error(`The following error occurred running the provided beforeMapMount hook ${f.message}`)}await te(h);const Zt=typeof s.crs=="string"?a[s.crs]:s.crs;s.crs=Zt||a.EPSG3857;const ot={addLayer(f){f.layerType!==void 0&&(l.layerControl===void 0?l.layersToAdd.push(f):l.layersInControl.find(w=>$(w.leafletObject)===$(f.leafletObject))||(l.layerControl.addLayer(f),l.layersInControl.push(f))),f.visible!==!1&&l.leafletRef.addLayer(f.leafletObject)},removeLayer(f){f.layerType!==void 0&&(l.layerControl===void 0?l.layersToAdd=l.layersToAdd.filter(w=>w.name!==f.name):(l.layerControl.removeLayer(f.leafletObject),l.layersInControl=l.layersInControl.filter(w=>$(w.leafletObject)!==$(f.leafletObject)))),l.leafletRef.removeLayer(f.leafletObject)},registerLayerControl(f){l.layerControl=f,l.layersToAdd.forEach(w=>{l.layerControl.addLayer(w)}),l.layersToAdd=[],m(f)},registerControl(f){l.leafletRef.addControl(f.leafletObject)},setZoom(f){const w=l.leafletRef.getZoom();f!==w&&l.leafletRef.setZoom(f,g.value)},setCrs(f){const w=l.leafletRef.getBounds();l.leafletRef.options.crs=f,l.leafletRef.fitBounds(w,{animate:!1,padding:[0,0]})},fitBounds(f){l.leafletRef.fitBounds(f,p.value)},setBounds(f){if(!f)return;const w=z(f);w.isValid()&&!(l.lastSetBounds||l.leafletRef.getBounds()).equals(w,0)&&(l.lastSetBounds=w,l.leafletRef.fitBounds(w))},setCenter(f){if(f==null)return;const w=W(f),wt=l.lastSetCenter||l.leafletRef.getCenter();(wt.lat!==w.lat||wt.lng!==w.lng)&&(l.lastSetCenter=w,l.leafletRef.panTo(w,g.value))}};rt(r,ot.addLayer),rt(v,ot.removeLayer),rt(m,ot.registerControl),rt(b,ot.registerLayerControl),l.leafletRef=H(c(o.value,s)),V(ot,l.leafletRef,t),xt(l.leafletRef,k),xt(l.leafletRef,u),l.ready=!0,R(()=>e.emit("ready",l.leafletRef))}),it(()=>{Rt(k),l.leafletRef&&(l.leafletRef.off(),l.leafletRef.remove())});const B=X(()=>l.leafletRef),S=X(()=>l.ready);return{root:o,ready:S,leafletObject:B,attrs:d}},render({attrs:t}){return t.style||(t.style={}),t.style.width||(t.style.width="100%"),t.style.height||(t.style.height="100%"),q("div",{...t,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),ce=["Symbol(Comment)","Symbol(Text)"],pe=["LTooltip","LPopup"],Wt={...tt,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},me=(t,e,o)=>{const{options:l,methods:i}=bt(t,e,o),s=j(t,Wt,l),u={...i,setDraggable(d){e.value.dragging&&(d?e.value.dragging.enable():e.value.dragging.disable())},latLngSync(d){o.emit("update:latLng",d.latlng),o.emit("update:lat-lng",d.latlng)},setLatLng(d){if(d!=null&&e.value){const r=e.value.getLatLng();(!r||!r.equals(d))&&e.value.setLatLng(d)}}};return{options:s,methods:u}},ve=(t,e)=>{const o=e.slots.default&&e.slots.default();return o&&o.length&&o.some(fe)};function fe(t){return!(ce.includes(t.type.toString())||pe.includes(t.type.name))}const ct=P({name:"LMarker",props:Wt,setup(t,e){const o=_(),l=_(!1),i=U(F),s=C(Q);D(Bt,()=>{var v;return!!((v=o.value)!=null&&v.getElement())}),D(zt,v=>{var m,b;const g=N((m=o.value)==null?void 0:m.getElement)&&((b=o.value)==null?void 0:b.getElement());g&&(g.innerHTML=v)}),D($t,v=>{var m;return((m=o.value)==null?void 0:m.setIcon)&&o.value.setIcon(v)});const{options:u,methods:d}=me(t,o,e),r={moveHandler:Ft(d.latLngSync)};return I(async()=>{const{marker:v,divIcon:m}=i?M.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);ve(u,e)&&(u.icon=m({className:""})),o.value=H(v(t.latLng,u));const{listeners:b}=K(e.attrs);o.value.on(b),o.value.on("move",r.moveHandler),V(d,o.value,t),s({...t,...d,leafletObject:o.value}),l.value=!0,R(()=>e.emit("ready",o.value))}),it(()=>Rt(r)),{ready:l,leafletObject:o}},render(){return Et(this.ready,this.$slots)}}),St={...gt,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},ye=(t,e,o)=>{const{options:l,methods:i}=ae(t,e,o),s=j(t,St,l),u={...i,setSmoothFactor(d){e.value.setStyle({smoothFactor:d})},setNoClip(d){e.value.setStyle({noClip:d})},addLatLng(d){e.value.addLatLng(d)}};return{options:s,methods:u}},Ot={...St},pt=P({name:"LPolyline",props:St,setup(t,e){const o=_(),l=_(!1),i=U(F),s=C(Q),{options:u,methods:d}=ye(t,o,e);return I(async()=>{const{polyline:r}=i?M.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=H(r(t.latLngs,u));const{listeners:v}=K(e.attrs);o.value.on(v),V(d,o.value,t),s({...t,...d,leafletObject:o.value}),l.value=!0,R(()=>e.emit("ready",o.value))}),{ready:l,leafletObject:o}},render(){return Et(this.ready,this.$slots)}}),Gt={...nt,content:{type:String,default:null}},be=(t,e)=>{const{options:o,methods:l}=at(t),i={...l,setContent(s){e.value&&s!==null&&s!==void 0&&e.value.setContent(s)}};return{options:o,methods:i}},ge=t=>t.default?q("div",{ref:"root"},t.default()):null,he={...Gt,latLng:{type:[Object,Array],default:()=>[]}},Se=(t,e)=>{const{options:o,methods:l}=be(t,e);return{options:o,methods:l}},mt=P({name:"LPopup",props:he,setup(t,e){const o=_(),l=_(null),i=U(F),s=C(Dt),u=C(It),{options:d,methods:r}=Se(t,o);return I(async()=>{const{popup:v}=i?M.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=H(v(d)),t.latLng!==void 0&&o.value.setLatLng(t.latLng),V(r,o.value,t);const{listeners:m}=K(e.attrs);o.value.on(m),o.value.setContent(t.content||l.value||""),s(o.value),R(()=>e.emit("ready",o.value))}),it(()=>{u()}),{root:l,leafletObject:o}},render(){return ge(this.$slots)}});({...Ot,latLngs:{...Ot.latLngs}});const _t={...ht,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(e=>typeof e=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},_e=(t,e,o)=>{const{options:l,methods:i}=Vt(t,e,o),s=j(t,_t,l),u={...i};return{options:s,methods:u}},we=P({props:_t,setup(t,e){const o=_(),l=U(F),i=C(Q),{options:s,methods:u}=_e(t,o,e);return I(async()=>{const{tileLayer:d}=l?M.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=H(d(t.url,s));const{listeners:r}=K(e.attrs);o.value.on(r),V(u,o.value,t),i({...t,...u,leafletObject:o.value}),R(()=>e.emit("ready",o.value))}),{leafletObject:o}},render(){return null}});({...Gt});({..._t});const ke={class:"modal-box"},Le={class:"alert alert-info mb-4"},xe={class:"font-mono text-sm"},Ce={class:"form-control mb-4"},Te={class:"form-control mb-4"},Oe={class:"form-control mb-4"},Pe=P({__name:"MarkerFormModal",props:{position:{}},emits:["save","cancel"],setup(t,{expose:e,emit:o}){const l=o,i=_(null),s=Pt({label:"",description:"",category:"personal"}),u=g=>`${g[0].toFixed(6)}°, ${g[1].toFixed(6)}°`,d=()=>{var g;(g=i.value)==null||g.showModal()},r=()=>{var g;(g=i.value)==null||g.close()},v=()=>{l("save",{label:s.label||void 0,description:s.description||void 0,category:s.category}),b(),r()},m=()=>{l("cancel"),b(),r()},b=()=>{s.label="",s.description="",s.category="personal"};return e({showModal:d,hideModal:r}),(g,p)=>(x(),A("dialog",{ref_key:"modalRef",ref:i,class:"modal"},[n("div",ke,[p[10]||(p[10]=n("h3",{class:"font-bold text-lg mb-4"},"Neuen Marker erstellen",-1)),n("form",{onSubmit:Ht(v,["prevent"])},[n("div",Le,[p[4]||(p[4]=n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-current shrink-0 w-6 h-6"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),n("div",null,[p[3]||(p[3]=n("div",{class:"text-xs"},"Koordinaten",-1)),n("div",xe,L(u(t.position)),1)])]),n("div",Ce,[p[5]||(p[5]=n("label",{class:"label"},[n("span",{class:"label-text"},"Name (optional)")],-1)),Y(n("input",{"onUpdate:modelValue":p[0]||(p[0]=k=>s.label=k),type:"text",placeholder:"z.B. Parkplatz, Aussichtspunkt...",class:"input input-bordered w-full",autofocus:""},null,512),[[lt,s.label]])]),n("div",Te,[p[6]||(p[6]=n("label",{class:"label"},[n("span",{class:"label-text"},"Beschreibung (optional)")],-1)),Y(n("textarea",{"onUpdate:modelValue":p[1]||(p[1]=k=>s.description=k),placeholder:"Notizen zu diesem Ort...",class:"textarea textarea-bordered h-20"},null,512),[[lt,s.description]])]),n("div",Oe,[p[8]||(p[8]=n("label",{class:"label"},[n("span",{class:"label-text"},"Kategorie")],-1)),Y(n("select",{"onUpdate:modelValue":p[2]||(p[2]=k=>s.category=k),class:"select select-bordered w-full"},[...p[7]||(p[7]=[Jt('<option value="personal" data-v-3b3f907d>Persönlich</option><option value="waypoint" data-v-3b3f907d>Wegpunkt</option><option value="parking" data-v-3b3f907d>Parkplatz</option><option value="campsite" data-v-3b3f907d>Campingplatz</option><option value="photo-spot" data-v-3b3f907d>Foto-Spot</option><option value="danger" data-v-3b3f907d>Achtung/Gefahr</option><option value="other" data-v-3b3f907d>Sonstiges</option>',7)])],512),[[Kt,s.category]])]),n("div",{class:"modal-action"},[n("button",{type:"button",onClick:m,class:"btn"}," Abbrechen "),p[9]||(p[9]=n("button",{type:"submit",class:"btn btn-primary"}," Marker speichern ",-1))])],32)]),n("form",{method:"dialog",class:"modal-backdrop"},[n("button",{type:"button",onClick:m},"close")])],512))}}),Ae=Mt(Pe,[["__scopeId","data-v-3b3f907d"]]),Me={class:"ml-2"},Re={key:0,class:"stats stats-vertical lg:stats-horizontal shadow mt-4"},je={class:"stat"},Be={class:"stat-figure text-primary"},ze={class:"stat-value text-primary text-2xl"},$e={class:"stat"},De={class:"stat-figure text-secondary"},Ie={class:"stat-value text-secondary text-2xl"},Ee={class:"stat"},Ne={class:"stat-figure text-accent"},Ue={class:"stat-value text-accent text-2xl"},Ve={class:"modal-box"},Fe={class:"form-control mb-4"},We={class:"form-control mb-4"},Ge={class:"label"},Ze={class:"label-text-alt"},qe={class:"form-control mb-4"},He={class:"label"},Ke={class:"label-text-alt"},Je={class:"alert alert-info mb-4"},Xe={class:"modal-action"},Ye={class:"modal-box"},Qe={key:0,class:"stats stats-vertical shadow mb-4"},to={class:"stat"},eo={class:"stat-value text-sm"},oo={class:"stat"},lo={class:"stat-value text-sm"},no={class:"stat"},ao={class:"stat-value text-sm"},so={class:"modal-action"},ro=P({__name:"TrackingControl",setup(t){const e=At(),o=_(null),l=_(null),i=_("Unbenannte Wanderung"),s=_(1),u=_(10),d=X(()=>e.isRecording),r=X(()=>e.liveStats),v=c=>c<1e3?`${c.toFixed(0)} m`:`${(c/1e3).toFixed(2)} km`,m=c=>{const a=Math.floor(c/1e3),h=Math.floor(a/60),z=Math.floor(h/60);if(z>0){const W=h%60;return`${z}:${W.toString().padStart(2,"0")} h`}if(h>0){const W=a%60;return`${h}:${W.toString().padStart(2,"0")} min`}return`${a} s`},b=()=>{var c;(c=o.value)==null||c.showModal()},g=()=>{var c;(c=o.value)==null||c.close()},p=()=>{var c;(c=l.value)==null||c.close()},k=async()=>{g(),e.updateTrackingConfig({minTimeInterval:s.value*60*1e3,minDistance:u.value});try{await e.startTracking(i.value),console.log("✅ Tracking gestartet")}catch(c){console.error("❌ Tracking-Start fehlgeschlagen:",c.message),alert("GPS konnte nicht gestartet werden. Bitte aktiviere GPS in deinen Einstellungen.")}},B=()=>{var c;(c=l.value)==null||c.showModal()},S=async()=>{p(),await e.stopTracking(),console.log("✅ Tracking gestoppt"),i.value="Unbenannte Wanderung",s.value=1,u.value=10};return(c,a)=>(x(),A("div",null,[n("button",{onClick:a[0]||(a[0]=h=>d.value?B():b()),class:Xt(["btn btn-lg",d.value?"btn-error":"btn-success"])},[T(y(J),{icon:d.value?"square":"play",size:"20"},null,8,["icon"]),n("span",Me,L(d.value?"Stoppen":"Wanderung starten"),1)],2),d.value&&r.value?(x(),A("div",Re,[n("div",je,[n("div",Be,[T(y(J),{icon:"navigation",size:"24"})]),a[8]||(a[8]=n("div",{class:"stat-title"},"Distanz",-1)),n("div",ze,L(v(r.value.totalDistance)),1)]),n("div",$e,[n("div",De,[T(y(J),{icon:"clock",size:"24"})]),a[9]||(a[9]=n("div",{class:"stat-title"},"Dauer",-1)),n("div",Ie,L(m(r.value.duration)),1)]),n("div",Ee,[n("div",Ne,[T(y(J),{icon:"map-pin",size:"24"})]),a[10]||(a[10]=n("div",{class:"stat-title"},"Wegpunkte",-1)),n("div",Ue,L(r.value.waypointCount),1)])])):E("",!0),n("dialog",{ref_key:"settingsModal",ref:o,class:"modal"},[n("div",Ve,[a[18]||(a[18]=n("h3",{class:"font-bold text-lg mb-4"},"Tracking-Einstellungen",-1)),n("div",Fe,[a[11]||(a[11]=n("label",{class:"label"},[n("span",{class:"label-text"},"Name der Wanderung")],-1)),Y(n("input",{"onUpdate:modelValue":a[1]||(a[1]=h=>i.value=h),type:"text",placeholder:"z.B. Keltenwelt-Rundweg",class:"input input-bordered"},null,512),[[lt,i.value]])]),n("div",We,[n("label",Ge,[a[12]||(a[12]=n("span",{class:"label-text"},"Wegpunkt-Intervall",-1)),n("span",Ze,L(s.value)+" Minute(n)",1)]),Y(n("input",{"onUpdate:modelValue":a[2]||(a[2]=h=>s.value=h),type:"range",min:"1",max:"5",class:"range range-primary",step:"1"},null,512),[[lt,s.value,void 0,{number:!0}]]),a[13]||(a[13]=n("div",{class:"w-full flex justify-between text-xs px-2 mt-1"},[n("span",null,"1 min"),n("span",null,"2 min"),n("span",null,"3 min"),n("span",null,"4 min"),n("span",null,"5 min")],-1))]),n("div",qe,[n("label",He,[a[14]||(a[14]=n("span",{class:"label-text"},"Mindestbewegung",-1)),n("span",Ke,L(u.value)+" Meter",1)]),Y(n("input",{"onUpdate:modelValue":a[3]||(a[3]=h=>u.value=h),type:"range",min:"5",max:"50",class:"range range-secondary",step:"5"},null,512),[[lt,u.value,void 0,{number:!0}]]),a[15]||(a[15]=n("div",{class:"w-full flex justify-between text-xs px-2 mt-1"},[n("span",null,"5m"),n("span",null,"25m"),n("span",null,"50m")],-1))]),n("div",Je,[T(y(J),{icon:"info",size:"20"}),a[16]||(a[16]=n("div",{class:"text-sm"},[n("p",{class:"font-semibold"},"GPS-Tracking Hinweise:"),n("ul",{class:"list-disc list-inside mt-1"},[n("li",null,"Bildschirm bleibt während Tracking an"),n("li",null,"GPS funktioniert offline"),n("li",null,"Batterieverbrauch: ~10-15%/Stunde")])],-1))]),n("div",Xe,[n("button",{onClick:a[4]||(a[4]=h=>g()),class:"btn btn-ghost"}," Abbrechen "),n("button",{onClick:a[5]||(a[5]=h=>k()),class:"btn btn-success"},[T(y(J),{icon:"play",size:"20"}),a[17]||(a[17]=vt(" Tracking starten ",-1))])])]),a[19]||(a[19]=n("form",{method:"dialog",class:"modal-backdrop"},[n("button",null,"close")],-1))],512),n("dialog",{ref_key:"stopModal",ref:l,class:"modal"},[n("div",Ye,[a[23]||(a[23]=n("h3",{class:"font-bold text-lg"},"Tracking beenden?",-1)),a[24]||(a[24]=n("p",{class:"py-4"}," Deine Wanderung wird gespeichert. ",-1)),r.value?(x(),A("div",Qe,[n("div",to,[a[20]||(a[20]=n("div",{class:"stat-title"},"Distanz",-1)),n("div",eo,L(v(r.value.totalDistance)),1)]),n("div",oo,[a[21]||(a[21]=n("div",{class:"stat-title"},"Dauer",-1)),n("div",lo,L(m(r.value.duration)),1)]),n("div",no,[a[22]||(a[22]=n("div",{class:"stat-title"},"Wegpunkte",-1)),n("div",ao,L(r.value.waypointCount),1)])])):E("",!0),n("div",so,[n("button",{onClick:a[6]||(a[6]=h=>p()),class:"btn btn-ghost"}," Weitermachen "),n("button",{onClick:a[7]||(a[7]=h=>S()),class:"btn btn-error"}," Tracking stoppen ")])]),a[25]||(a[25]=n("form",{method:"dialog",class:"modal-backdrop"},[n("button",null,"close")],-1))],512)]))}}),io={class:"w-full h-full relative"},uo={class:"flex flex-col gap-2 min-w-[200px]"},co={class:"font-bold text-base"},po={key:0,class:"text-sm opacity-80"},mo={class:"badge badge-sm"},vo={class:"text-xs opacity-60 font-mono"},fo={class:"text-xs opacity-50"},yo=["onClick"],bo={key:0,class:"absolute bottom-20 lg:bottom-4 left-1/2 transform -translate-x-1/2 z-[500] w-11/12 max-w-md"},go=P({__name:"MapView",props:{showTrackingPanel:Boolean},setup(t,{expose:e}){const o=At(),l=Yt(),i=_(null),s=_(null),u=_(null),d=new Lt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),r=new Lt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),v=S=>{var a;const c=[S.latlng.lat,S.latlng.lng];o.isRecording?o.addPointToPath(c):(u.value=c,(a=s.value)==null||a.showModal())},m=S=>{u.value&&(o.addUserMarker(u.value,S.label,S.description,S.category),u.value=null)},b=()=>{u.value=null},g=S=>new Date(S).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return e({centerOnUser:async()=>{try{await o.centerOnUser()}catch(S){alert(S.message||"Failed to get your location")}},toggleRecording:()=>{o.toggleRecording()},clearPath:()=>{o.clearPath()}}),I(()=>{R(()=>{var S;(S=i.value)!=null&&S.leafletObject&&i.value.leafletObject.invalidateSize()})}),(S,c)=>(x(),A("div",io,[T(y(de),{ref_key:"mapComponent",ref:i,zoom:y(o).zoom,center:y(o).center,"onUpdate:zoom":c[0]||(c[0]=a=>y(o).setZoom(a)),"onUpdate:center":c[1]||(c[1]=a=>y(o).setCenter(a)),onClick:v,options:{touchZoom:!0,doubleClickZoom:!0,scrollWheelZoom:!0,tap:!0,tapTolerance:15,dragging:!0,zoomControl:!0,attributionControl:!0},class:"w-full h-full"},{default:G(()=>[T(y(we),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),y(o).userLocation?(x(),Z(y(ct),{key:0,"lat-lng":y(o).userLocation,icon:y(d)},{default:G(()=>[T(y(mt),null,{default:G(()=>[...c[2]||(c[2]=[vt("Your Location",-1)])]),_:1})]),_:1},8,["lat-lng","icon"])):E("",!0),(x(!0),A(ut,null,dt(y(l).pois,a=>(x(),Z(y(ct),{key:a.id,"lat-lng":a.coordinates,icon:y(l).getMarkerIcon(a.category)},{default:G(()=>[T(y(mt),null,{default:G(()=>[n("b",null,L(a.name),1),c[3]||(c[3]=n("br",null,null,-1)),vt(L(a.description),1)]),_:2},1024)]),_:2},1032,["lat-lng","icon"]))),128)),(x(!0),A(ut,null,dt(y(o).userMarkers,a=>(x(),Z(y(ct),{key:a.id,"lat-lng":a.position,icon:y(r)},{default:G(()=>[T(y(mt),null,{default:G(()=>[n("div",uo,[n("div",co,L(a.label||"Unbenannter Marker"),1),a.description?(x(),A("div",po,L(a.description),1)):E("",!0),n("div",mo,L(a.category),1),n("div",vo,L(a.position[0].toFixed(6))+"°, "+L(a.position[1].toFixed(6))+"° ",1),n("div",fo,L(g(a.timestamp)),1),n("button",{onClick:h=>y(o).removeUserMarker(a.id),class:"btn btn-xs btn-error mt-2"}," Löschen ",8,yo)])]),_:2},1024)]),_:2},1032,["lat-lng","icon"]))),128)),y(o).currentPath.length>0?(x(),Z(y(pt),{key:1,"lat-lngs":y(o).currentPath,color:"red",weight:4,opacity:.7},null,8,["lat-lngs"])):E("",!0),y(o).activeTrack&&y(o).activeTrack.waypoints.length>0?(x(),Z(y(pt),{key:2,"lat-lngs":y(o).activeTrack.waypoints.map(a=>[a.lat,a.lng]),color:"red",weight:4,opacity:.8},null,8,["lat-lngs"])):E("",!0),(x(!0),A(ut,null,dt(y(o).savedPaths,a=>(x(),Z(y(pt),{key:a.id,"lat-lngs":a.points,color:"blue",weight:3,opacity:.5},null,8,["lat-lngs"]))),128))]),_:1},8,["zoom","center"]),t.showTrackingPanel?(x(),A("div",bo,[T(ro)])):E("",!0),u.value?(x(),Z(Ae,{key:1,ref_key:"markerFormModal",ref:s,position:u.value,onSave:m,onCancel:b},null,8,["position"])):E("",!0)]))}}),wo=Mt(go,[["__scopeId","data-v-83c04027"]]);export{wo as default};
