const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/poisStore-B6asEzc_.js","assets/index-V6WiKz7v.js","assets/index-lZUMgWad.css"])))=>i.map(i=>d[i]);
import{d as T,i as $,p as B,j as M,_ as A,m as F,k as P,l as ae,r as _,q as Pe,h as te,x as Le,y as E,z as pe,A as Ge,c as q,a as y,B as qe,t as x,w as re,v as _e,C as He,D as We,o as C,u as Je,b as X,E as U,e as b,F as V,f as Y,g as Se,G as se,H as ie}from"./index-V6WiKz7v.js";import{u as Ke,L as we}from"./poisStore-B6asEzc_.js";import{_ as Te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ce=(e,t)=>{for(const o of Object.keys(t))e.on(o,t[o])},Re=e=>{for(const t of Object.keys(e)){const o=e[t];o&&I(o.cancel)&&o.cancel()}},Xe=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),I=e=>typeof e=="function",N=(e,t,o)=>{for(const l in o){const n="set"+Xe(l);e[n]?Le(()=>o[l],(a,s)=>{e[n](a,s)}):t[n]&&Le(()=>o[l],a=>{t[n](a)})}},R=(e,t,o={})=>{const l={...o};for(const n in e){const a=t[n],s=e[n];a&&(a&&a.custom===!0||s!==void 0&&(l[n]=s))}return l},Z=e=>{const t={},o={};for(const l in e)if(l.startsWith("on")&&!l.startsWith("onUpdate")&&l!=="onReady"){const n=l.slice(2).toLocaleLowerCase();t[n]=e[l]}else o[l]=e[l];return{listeners:t,attrs:o}},Ye=async e=>{const t=await Promise.all([A(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),A(()=>import("./marker-icon-C2eJqgqv.js"),[]),A(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:t[0].default,iconUrl:t[1].default,shadowUrl:t[2].default})},oe=e=>{const t=_((...l)=>console.warn(`Method ${e} has been invoked without being replaced`)),o=(...l)=>t.value(...l);return o.wrapped=t,B(e,o),o},le=(e,t)=>e.wrapped.value=t,k=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,O=e=>{const t=E(e);if(t===void 0)throw new Error(`Attempt to inject ${e.description} before it was provided.`);return t},z=Symbol("useGlobalLeaflet"),H=Symbol("addLayer"),me=Symbol("removeLayer"),je=Symbol("registerControl"),Qe=Symbol("registerLayerControl"),xe=Symbol("canSetParentHtml"),Be=Symbol("setParentHtml"),Me=Symbol("setIcon"),Ie=Symbol("bindPopup"),et=Symbol("bindTooltip"),Ee=Symbol("unbindPopup"),tt=Symbol("unbindTooltip"),Q={options:{type:Object,default:()=>({}),custom:!0}},ee=e=>({options:e.options,methods:{}}),W={...Q,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},ye=(e,t,o)=>{const l=O(H),n=O(me),{options:a,methods:s}=ee(e),i=R(e,W,a),r=()=>l({leafletObject:t.value}),p=()=>n({leafletObject:t.value}),c={...s,setAttribution(f){p(),t.value.options.attribution=f,e.visible&&r()},setName(){p(),e.visible&&r()},setLayerType(){p(),e.visible&&r()},setVisible(f){t.value&&(f?r():p())},bindPopup(f){if(!t.value||!I(t.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}t.value.bindPopup(f)},bindTooltip(f){if(!t.value||!I(t.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}t.value.bindTooltip(f)},unbindTooltip(){t.value&&(I(t.value.closeTooltip)&&t.value.closeTooltip(),I(t.value.unbindTooltip)&&t.value.unbindTooltip())},unbindPopup(){t.value&&(I(t.value.closePopup)&&t.value.closePopup(),I(t.value.unbindPopup)&&t.value.unbindPopup())},updateVisibleProp(f){o.emit("update:visible",f)}};return B(Ie,c.bindPopup),B(et,c.bindTooltip),B(Ee,c.unbindPopup),B(tt,c.unbindTooltip),pe(()=>{c.unbindPopup(),c.unbindTooltip(),p()}),{options:i,methods:c}},Ne=(e,t)=>{if(e&&t.default)return $("div",{style:{display:"none"}},t.default())},ze={...W,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},ot=(e,t,o)=>{const{options:l,methods:n}=ye(e,t,o);return{options:R(e,ze,l),methods:n}},fe={...ze,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},lt=(e,t,o)=>{const{options:l,methods:n}=ot(e,t,o),a=R(e,fe,l),s=O(me),i={...n,setStroke(r){t.value.setStyle({stroke:r})},setColor(r){t.value.setStyle({color:r})},setWeight(r){t.value.setStyle({weight:r})},setOpacity(r){t.value.setStyle({opacity:r})},setLineCap(r){t.value.setStyle({lineCap:r})},setLineJoin(r){t.value.setStyle({lineJoin:r})},setDashArray(r){t.value.setStyle({dashArray:r})},setDashOffset(r){t.value.setStyle({dashOffset:r})},setFill(r){t.value.setStyle({fill:r})},setFillColor(r){t.value.setStyle({fillColor:r})},setFillOpacity(r){t.value.setStyle({fillOpacity:r})},setFillRule(r){t.value.setStyle({fillRule:r})},setClassName(r){t.value.setStyle({className:r})}};return ae(()=>{s({leafletObject:t.value})}),{options:a,methods:i}},at={...fe,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}};({...at});const J={...Q,position:{type:String}},nt=(e,t)=>{const{options:o,methods:l}=ee(e),n=R(e,J,o),a={...l,setPosition(s){t.value&&t.value.setPosition(s)}};return pe(()=>{t.value&&t.value.remove()}),{options:n,methods:a}},rt=e=>e.default?$("div",{ref:"root"},e.default()):null;T({name:"LControl",props:{...J,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(e,t){const o=_(),l=_(),n=E(z),a=O(je),{options:s,methods:i}=nt(e,o);return M(async()=>{const{Control:r,DomEvent:p}=n?k.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),c=r.extend({onAdd(){return l.value}});o.value=F(new c(s)),N(i,o.value,e),a({leafletObject:o.value}),e.disableClickPropagation&&l.value&&p.disableClickPropagation(l.value),e.disableScrollPropagation&&l.value&&p.disableScrollPropagation(l.value),P(()=>t.emit("ready",o.value))}),{root:l,leafletObject:o}},render(){return rt(this.$slots)}});({...J});({...J});({...J});({...J});const De={...W};({...De});({...De});const ve={...W,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},Ue=(e,t,o)=>{const{options:l,methods:n}=ye(e,t,o),a=R(e,ve,l),s={...n,setTileComponent(){var i;(i=t.value)==null||i.redraw()}};return pe(()=>{t.value.off()}),{options:a,methods:s}},st=(e,t,o,l)=>e.extend({initialize(n){this.tileComponents={},this.on("tileunload",this._unloadTile),o.setOptions(this,n)},createTile(n){const a=this._tileCoordsToKey(n);this.tileComponents[a]=t.create("div");const s=$({setup:l,props:["coords"]},{coords:n});return Ge(s,this.tileComponents[a]),this.tileComponents[a]},_unloadTile(n){const a=this._tileCoordsToKey(n.coords);this.tileComponents[a]&&(this.tileComponents[a].innerHTML="",this.tileComponents[a]=void 0)}});T({props:{...ve,childRender:{type:Function,required:!0}},setup(e,t){const o=_(),l=_(null),n=_(!1),a=E(z),s=O(H),{options:i,methods:r}=Ue(e,o,t);return M(async()=>{const{GridLayer:p,DomUtil:c,Util:f}=a?k.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),g=st(p,c,f,e.childRender);o.value=F(new g(i));const{listeners:u}=Z(t.attrs);o.value.on(u),N(r,o.value,e),s({...e,...r,leafletObject:o.value}),n.value=!0,P(()=>t.emit("ready",o.value))}),{root:l,ready:n,leafletObject:o}},render(){return this.ready?$("div",{style:{display:"none"},ref:"root"}):null}});const Oe={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}};T({name:"LIcon",props:{...Oe,...Q},setup(e,t){const o=_(),l=E(z),n=O(xe),a=O(Be),s=O(Me);let i,r,p,c,f;const g=(h,v,d)=>{const w=h&&h.innerHTML;if(!v){d&&f&&n()&&a(w);return}const{listeners:G}=Z(t.attrs);f&&r(f,G);const{options:ne}=ee(e),j=R(e,Oe,ne);w&&(j.html=w),f=j.html?p(j):c(j),i(f,G),s(f)},u=()=>{P(()=>g(o.value,!0,!1))},S=()=>{P(()=>g(o.value,!1,!0))},D={setIconUrl:u,setIconRetinaUrl:u,setIconSize:u,setIconAnchor:u,setPopupAnchor:u,setTooltipAnchor:u,setShadowUrl:u,setShadowRetinaUrl:u,setShadowAnchor:u,setBgPos:u,setClassName:u,setHtml:u};return M(async()=>{const{DomEvent:h,divIcon:v,icon:d}=l?k.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);i=h.on,r=h.off,p=v,c=d,N(D,{},e),new MutationObserver(S).observe(o.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),u()}),{root:o}},render(){const e=this.$slots.default?this.$slots.default():void 0;return $("div",{ref:"root"},e)}});({...W});function Ve(e,t,o){var l,n,a;t===void 0&&(t=50),o===void 0&&(o={});var s=(l=o.isImmediate)!=null&&l,i=(n=o.callback)!=null&&n,r=o.maxWait,p=Date.now(),c=[];function f(){if(r!==void 0){var u=Date.now()-p;if(u+t>=r)return r-u}return t}var g=function(){var u=[].slice.call(arguments),S=this;return new Promise(function(D,h){var v=s&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,p=Date.now(),!s){var w=e.apply(S,u);i&&i(w),c.forEach(function(G){return(0,G.resolve)(w)}),c=[]}},f()),v){var d=e.apply(S,u);return i&&i(d),D(d)}c.push({resolve:D,reject:h})})};return g.cancel=function(u){a!==void 0&&clearTimeout(a),c.forEach(function(S){return(0,S.reject)(u)}),c=[]},g}const Ae={...Q,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},it=T({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:Ae,setup(e,t){const o=_(),l=Pe({ready:!1,layersToAdd:[],layersInControl:[]}),{options:n}=ee(e),a=R(e,Ae,n),{listeners:s,attrs:i}=Z(t.attrs),r=oe(H),p=oe(me),c=oe(je),f=oe(Qe);B(z,e.useGlobalLeaflet);const g=te(()=>{const v={};return e.noBlockingAnimations&&(v.animate=!1),v}),u=te(()=>{const v=g.value;return e.padding&&(v.padding=e.padding),e.paddingTopLeft&&(v.paddingTopLeft=e.paddingTopLeft),e.paddingBottomRight&&(v.paddingBottomRight=e.paddingBottomRight),v}),S={moveend:Ve(v=>{l.leafletRef&&(t.emit("update:zoom",l.leafletRef.getZoom()),t.emit("update:center",l.leafletRef.getCenter()),t.emit("update:bounds",l.leafletRef.getBounds()))}),overlayadd(v){const d=l.layersInControl.find(w=>w.name===v.name);d&&d.updateVisibleProp(!0)},overlayremove(v){const d=l.layersInControl.find(w=>w.name===v.name);d&&d.updateVisibleProp(!1)}};M(async()=>{e.useGlobalLeaflet&&(k.L=k.L||await A(()=>import("./poisStore-B6asEzc_.js").then(m=>m.l),__vite__mapDeps([0,1,2])));const{map:v,CRS:d,Icon:w,latLngBounds:G,latLng:ne,stamp:j}=e.useGlobalLeaflet?k.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);try{a.beforeMapMount&&await a.beforeMapMount()}catch(m){console.error(`The following error occurred running the provided beforeMapMount hook ${m.message}`)}await Ye(w);const Ze=typeof a.crs=="string"?d[a.crs]:a.crs;a.crs=Ze||d.EPSG3857;const K={addLayer(m){m.layerType!==void 0&&(l.layerControl===void 0?l.layersToAdd.push(m):l.layersInControl.find(L=>j(L.leafletObject)===j(m.leafletObject))||(l.layerControl.addLayer(m),l.layersInControl.push(m))),m.visible!==!1&&l.leafletRef.addLayer(m.leafletObject)},removeLayer(m){m.layerType!==void 0&&(l.layerControl===void 0?l.layersToAdd=l.layersToAdd.filter(L=>L.name!==m.name):(l.layerControl.removeLayer(m.leafletObject),l.layersInControl=l.layersInControl.filter(L=>j(L.leafletObject)!==j(m.leafletObject)))),l.leafletRef.removeLayer(m.leafletObject)},registerLayerControl(m){l.layerControl=m,l.layersToAdd.forEach(L=>{l.layerControl.addLayer(L)}),l.layersToAdd=[],c(m)},registerControl(m){l.leafletRef.addControl(m.leafletObject)},setZoom(m){const L=l.leafletRef.getZoom();m!==L&&l.leafletRef.setZoom(m,g.value)},setCrs(m){const L=l.leafletRef.getBounds();l.leafletRef.options.crs=m,l.leafletRef.fitBounds(L,{animate:!1,padding:[0,0]})},fitBounds(m){l.leafletRef.fitBounds(m,u.value)},setBounds(m){if(!m)return;const L=G(m);L.isValid()&&!(l.lastSetBounds||l.leafletRef.getBounds()).equals(L,0)&&(l.lastSetBounds=L,l.leafletRef.fitBounds(L))},setCenter(m){if(m==null)return;const L=ne(m),he=l.lastSetCenter||l.leafletRef.getCenter();(he.lat!==L.lat||he.lng!==L.lng)&&(l.lastSetCenter=L,l.leafletRef.panTo(L,g.value))}};le(r,K.addLayer),le(p,K.removeLayer),le(c,K.registerControl),le(f,K.registerLayerControl),l.leafletRef=F(v(o.value,a)),N(K,l.leafletRef,e),Ce(l.leafletRef,S),Ce(l.leafletRef,s),l.ready=!0,P(()=>t.emit("ready",l.leafletRef))}),ae(()=>{Re(S),l.leafletRef&&(l.leafletRef.off(),l.leafletRef.remove())});const D=te(()=>l.leafletRef),h=te(()=>l.ready);return{root:o,ready:h,leafletObject:D,attrs:i}},render({attrs:e}){return e.style||(e.style={}),e.style.width||(e.style.width="100%"),e.style.height||(e.style.height="100%"),$("div",{...e,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),ut=["Symbol(Comment)","Symbol(Text)"],dt=["LTooltip","LPopup"],$e={...W,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},ct=(e,t,o)=>{const{options:l,methods:n}=ye(e,t,o),a=R(e,$e,l),s={...n,setDraggable(i){t.value.dragging&&(i?t.value.dragging.enable():t.value.dragging.disable())},latLngSync(i){o.emit("update:latLng",i.latlng),o.emit("update:lat-lng",i.latlng)},setLatLng(i){if(i!=null&&t.value){const r=t.value.getLatLng();(!r||!r.equals(i))&&t.value.setLatLng(i)}}};return{options:a,methods:s}},pt=(e,t)=>{const o=t.slots.default&&t.slots.default();return o&&o.length&&o.some(mt)};function mt(e){return!(ut.includes(e.type.toString())||dt.includes(e.type.name))}const ue=T({name:"LMarker",props:$e,setup(e,t){const o=_(),l=_(!1),n=E(z),a=O(H);B(xe,()=>{var p;return!!((p=o.value)!=null&&p.getElement())}),B(Be,p=>{var c,f;const g=I((c=o.value)==null?void 0:c.getElement)&&((f=o.value)==null?void 0:f.getElement());g&&(g.innerHTML=p)}),B(Me,p=>{var c;return((c=o.value)==null?void 0:c.setIcon)&&o.value.setIcon(p)});const{options:s,methods:i}=ct(e,o,t),r={moveHandler:Ve(i.latLngSync)};return M(async()=>{const{marker:p,divIcon:c}=n?k.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);pt(s,t)&&(s.icon=c({className:""})),o.value=F(p(e.latLng,s));const{listeners:f}=Z(t.attrs);o.value.on(f),o.value.on("move",r.moveHandler),N(i,o.value,e),a({...e,...i,leafletObject:o.value}),l.value=!0,P(()=>t.emit("ready",o.value))}),ae(()=>Re(r)),{ready:l,leafletObject:o}},render(){return Ne(this.ready,this.$slots)}}),be={...fe,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},yt=(e,t,o)=>{const{options:l,methods:n}=lt(e,t,o),a=R(e,be,l),s={...n,setSmoothFactor(i){t.value.setStyle({smoothFactor:i})},setNoClip(i){t.value.setStyle({noClip:i})},addLatLng(i){t.value.addLatLng(i)}};return{options:a,methods:s}},ke={...be},de=T({name:"LPolyline",props:be,setup(e,t){const o=_(),l=_(!1),n=E(z),a=O(H),{options:s,methods:i}=yt(e,o,t);return M(async()=>{const{polyline:r}=n?k.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=F(r(e.latLngs,s));const{listeners:p}=Z(t.attrs);o.value.on(p),N(i,o.value,e),a({...e,...i,leafletObject:o.value}),l.value=!0,P(()=>t.emit("ready",o.value))}),{ready:l,leafletObject:o}},render(){return Ne(this.ready,this.$slots)}}),Fe={...Q,content:{type:String,default:null}},ft=(e,t)=>{const{options:o,methods:l}=ee(e),n={...l,setContent(a){t.value&&a!==null&&a!==void 0&&t.value.setContent(a)}};return{options:o,methods:n}},vt=e=>e.default?$("div",{ref:"root"},e.default()):null,bt={...Fe,latLng:{type:[Object,Array],default:()=>[]}},gt=(e,t)=>{const{options:o,methods:l}=ft(e,t);return{options:o,methods:l}},ce=T({name:"LPopup",props:bt,setup(e,t){const o=_(),l=_(null),n=E(z),a=O(Ie),s=O(Ee),{options:i,methods:r}=gt(e,o);return M(async()=>{const{popup:p}=n?k.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=F(p(i)),e.latLng!==void 0&&o.value.setLatLng(e.latLng),N(r,o.value,e);const{listeners:c}=Z(t.attrs);o.value.on(c),o.value.setContent(e.content||l.value||""),a(o.value),P(()=>t.emit("ready",o.value))}),ae(()=>{s()}),{root:l,leafletObject:o}},render(){return vt(this.$slots)}});({...ke,latLngs:{...ke.latLngs}});const ge={...ve,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:e=>typeof e=="string"?!0:Array.isArray(e)?e.every(t=>typeof t=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},ht=(e,t,o)=>{const{options:l,methods:n}=Ue(e,t,o),a=R(e,ge,l),s={...n};return{options:a,methods:s}},Lt=T({props:ge,setup(e,t){const o=_(),l=E(z),n=O(H),{options:a,methods:s}=ht(e,o,t);return M(async()=>{const{tileLayer:i}=l?k.L:await A(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=F(i(e.url,a));const{listeners:r}=Z(t.attrs);o.value.on(r),N(s,o.value,e),n({...e,...s,leafletObject:o.value}),P(()=>t.emit("ready",o.value))}),{leafletObject:o}},render(){return null}});({...Fe});({...ge});const _t={class:"modal-box"},St={class:"alert alert-info mb-4"},wt={class:"font-mono text-sm"},Ct={class:"form-control mb-4"},Ot={class:"form-control mb-4"},At={class:"form-control mb-4"},kt=T({__name:"MarkerFormModal",props:{position:{}},emits:["save","cancel"],setup(e,{expose:t,emit:o}){const l=o,n=_(null),a=Pe({label:"",description:"",category:"personal"}),s=g=>`${g[0].toFixed(6)}°, ${g[1].toFixed(6)}°`,i=()=>{var g;(g=n.value)==null||g.showModal()},r=()=>{var g;(g=n.value)==null||g.close()},p=()=>{l("save",{label:a.label||void 0,description:a.description||void 0,category:a.category}),f(),r()},c=()=>{l("cancel"),f(),r()},f=()=>{a.label="",a.description="",a.category="personal"};return t({showModal:i,hideModal:r}),(g,u)=>(C(),q("dialog",{ref_key:"modalRef",ref:n,class:"modal"},[y("div",_t,[u[10]||(u[10]=y("h3",{class:"font-bold text-lg mb-4"},"Neuen Marker erstellen",-1)),y("form",{onSubmit:qe(p,["prevent"])},[y("div",St,[u[4]||(u[4]=y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-current shrink-0 w-6 h-6"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),y("div",null,[u[3]||(u[3]=y("div",{class:"text-xs"},"Koordinaten",-1)),y("div",wt,x(s(e.position)),1)])]),y("div",Ct,[u[5]||(u[5]=y("label",{class:"label"},[y("span",{class:"label-text"},"Name (optional)")],-1)),re(y("input",{"onUpdate:modelValue":u[0]||(u[0]=S=>a.label=S),type:"text",placeholder:"z.B. Parkplatz, Aussichtspunkt...",class:"input input-bordered w-full",autofocus:""},null,512),[[_e,a.label]])]),y("div",Ot,[u[6]||(u[6]=y("label",{class:"label"},[y("span",{class:"label-text"},"Beschreibung (optional)")],-1)),re(y("textarea",{"onUpdate:modelValue":u[1]||(u[1]=S=>a.description=S),placeholder:"Notizen zu diesem Ort...",class:"textarea textarea-bordered h-20"},null,512),[[_e,a.description]])]),y("div",At,[u[8]||(u[8]=y("label",{class:"label"},[y("span",{class:"label-text"},"Kategorie")],-1)),re(y("select",{"onUpdate:modelValue":u[2]||(u[2]=S=>a.category=S),class:"select select-bordered w-full"},[...u[7]||(u[7]=[We('<option value="personal" data-v-3b3f907d>Persönlich</option><option value="waypoint" data-v-3b3f907d>Wegpunkt</option><option value="parking" data-v-3b3f907d>Parkplatz</option><option value="campsite" data-v-3b3f907d>Campingplatz</option><option value="photo-spot" data-v-3b3f907d>Foto-Spot</option><option value="danger" data-v-3b3f907d>Achtung/Gefahr</option><option value="other" data-v-3b3f907d>Sonstiges</option>',7)])],512),[[He,a.category]])]),y("div",{class:"modal-action"},[y("button",{type:"button",onClick:c,class:"btn"}," Abbrechen "),u[9]||(u[9]=y("button",{type:"submit",class:"btn btn-primary"}," Marker speichern ",-1))])],32)]),y("form",{method:"dialog",class:"modal-backdrop"},[y("button",{type:"button",onClick:c},"close")])],512))}}),Pt=Te(kt,[["__scopeId","data-v-3b3f907d"]]),Tt={class:"w-full h-full"},Rt={class:"flex flex-col gap-2 min-w-[200px]"},jt={class:"font-bold text-base"},xt={key:0,class:"text-sm opacity-80"},Bt={class:"badge badge-sm"},Mt={class:"text-xs opacity-60 font-mono"},It={class:"text-xs opacity-50"},Et=["onClick"],Nt=T({__name:"MapView",setup(e,{expose:t}){const o=Je(),l=Ke(),n=_(null),a=_(null),s=_(null),i=new we.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),r=new we.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),p=h=>{var d;const v=[h.latlng.lat,h.latlng.lng];o.isRecording?o.addPointToPath(v):(s.value=v,(d=a.value)==null||d.showModal())},c=h=>{s.value&&(o.addUserMarker(s.value,h.label,h.description,h.category),s.value=null)},f=()=>{s.value=null},g=h=>new Date(h).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return t({centerOnUser:async()=>{try{await o.centerOnUser()}catch(h){alert(h.message||"Failed to get your location")}},toggleRecording:()=>{o.toggleRecording()},clearPath:()=>{o.clearPath()}}),M(()=>{P(()=>{var h;(h=n.value)!=null&&h.leafletObject&&n.value.leafletObject.invalidateSize()})}),(h,v)=>(C(),q("div",Tt,[X(b(it),{ref_key:"mapComponent",ref:n,zoom:b(o).zoom,center:b(o).center,"onUpdate:zoom":v[0]||(v[0]=d=>b(o).setZoom(d)),"onUpdate:center":v[1]||(v[1]=d=>b(o).setCenter(d)),onClick:p,options:{touchZoom:!0,doubleClickZoom:!0,scrollWheelZoom:!0,tap:!0,tapTolerance:15,dragging:!0,zoomControl:!0,attributionControl:!0},class:"w-full h-full"},{default:U(()=>[X(b(Lt),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),b(o).userLocation?(C(),V(b(ue),{key:0,"lat-lng":b(o).userLocation,icon:b(i)},{default:U(()=>[X(b(ce),null,{default:U(()=>[...v[2]||(v[2]=[Se("Your Location",-1)])]),_:1})]),_:1},8,["lat-lng","icon"])):Y("",!0),(C(!0),q(se,null,ie(b(l).pois,d=>(C(),V(b(ue),{key:d.id,"lat-lng":d.coordinates,icon:b(l).getMarkerIcon(d.category)},{default:U(()=>[X(b(ce),null,{default:U(()=>[y("b",null,x(d.name),1),v[3]||(v[3]=y("br",null,null,-1)),Se(x(d.description),1)]),_:2},1024)]),_:2},1032,["lat-lng","icon"]))),128)),(C(!0),q(se,null,ie(b(o).userMarkers,d=>(C(),V(b(ue),{key:d.id,"lat-lng":d.position,icon:b(r)},{default:U(()=>[X(b(ce),null,{default:U(()=>[y("div",Rt,[y("div",jt,x(d.label||"Unbenannter Marker"),1),d.description?(C(),q("div",xt,x(d.description),1)):Y("",!0),y("div",Bt,x(d.category),1),y("div",Mt,x(d.position[0].toFixed(6))+"°, "+x(d.position[1].toFixed(6))+"° ",1),y("div",It,x(g(d.timestamp)),1),y("button",{onClick:w=>b(o).removeUserMarker(d.id),class:"btn btn-xs btn-error mt-2"}," Löschen ",8,Et)])]),_:2},1024)]),_:2},1032,["lat-lng","icon"]))),128)),b(o).currentPath.length>0?(C(),V(b(de),{key:1,"lat-lngs":b(o).currentPath,color:"red",weight:4,opacity:.7},null,8,["lat-lngs"])):Y("",!0),b(o).activeTrack&&b(o).activeTrack.waypoints.length>0?(C(),V(b(de),{key:2,"lat-lngs":b(o).activeTrack.waypoints.map(d=>[d.lat,d.lng]),color:"red",weight:4,opacity:.8},null,8,["lat-lngs"])):Y("",!0),(C(!0),q(se,null,ie(b(o).savedPaths,d=>(C(),V(b(de),{key:d.id,"lat-lngs":d.points,color:"blue",weight:3,opacity:.5},null,8,["lat-lngs"]))),128))]),_:1},8,["zoom","center"]),s.value?(C(),V(Pt,{key:0,ref_key:"markerFormModal",ref:a,position:s.value,onSave:c,onCancel:f},null,8,["position"])):Y("",!0)]))}}),Vt=Te(Nt,[["__scopeId","data-v-359895ae"]]);export{Vt as default};
